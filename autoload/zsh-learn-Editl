# -*- mode: sh -*-
# vim: set ft=sh:
function zsh-learn-Editl(){
    if [[ -z $1 ]]; then
        echo "Usage: zsh-learn-Edit <id>"
        return 1
    fi

    content=$(echo "SELECT learning FROM $ZPWR_SCHEMA_NAME.$ZPWR_TABLE_NAME WHERE id = $1;" | ${=ZPWR_LEARN_COMMAND} --silent)

    filename="/tmp/edit-note"
    touch $filename
    echo $content >> $filename
    $EDITOR $filename
    learning=$(cat $filename)
    rm $filename

    if [[ -z $learning ]]; then
        echo "Content cannot be empty"
        return 1
    fi

    echo "UPDATE $ZPWR_SCHEMA_NAME.$ZPWR_TABLE_NAME SET learning='"$learning"' WHERE id = $1;" | ${=ZPWR_LEARN_COMMAND}
}

zsh-learn-Editl "$@"
